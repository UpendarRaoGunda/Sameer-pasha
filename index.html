<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Raghava Consultancy — Ad Generator</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Telugu:wght@400;600;700;800&family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <style>
    :root {
      --canvas-w: 1080px;
      --canvas-h: 1920px;
      --primary: #0A3D62;
      --secondary: #0F5A8A;
      --gold: #F5B042;
      --gold-glow: #FFD700;
      --light: #FFFFFF;
      --text-light: #E6F0FA;
      --bg-dark: #040F1A;
      --glass: rgba(255, 255, 255, 0.06);
      --border: rgba(255, 255, 255, 0.1);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #040F1A 0%, #0A1F33 50%, #0A3D62 100%);
      color: var(--text-light);
      min-height: 100vh;
      display: flex;
      gap: 24px;
      align-items: flex-start;
      justify-content: center;
      padding: 32px;
      background-attachment: fixed;
      overflow-x: hidden;
    }

    .panel {
      width: 440px;
      background: var(--glass);
      border-radius: 20px;
      padding: 24px;
      backdrop-filter: blur(12px);
      border: 1px solid var(--border);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
      transition: transform 0.3s ease;
    }
    .panel:hover { transform: translateY(-4px); }

    .panel h2 {
      font-size: 20px;
      font-weight: 700;
      color: var(--gold);
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .panel h2 i { color: var(--gold-glow); }

    label {
      display: block;
      margin-top: 16px;
      font-size: 13px;
      font-weight: 500;
      color: #B0C4DE;
    }

    input[type="text"] {
      width: 100%;
      padding: 12px 14px;
      margin-top: 6px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: rgba(255, 255, 255, 0.05);
      color: #fff;
      font-size: 14px;
      outline: none;
      transition: all 0.3s ease;
    }
    input:focus {
      border-color: var(--gold);
      box-shadow: 0 0 0 3px rgba(245, 180, 66, 0.2);
      background: rgba(255, 255, 255, 0.08);
    }

    button {
      margin-top: 16px;
      width: 100%;
      padding: 14px;
      border: none;
      border-radius: 12px;
      font-weight: 600;
      font-size: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    #renderBtn {
      background: linear-gradient(135deg, var(--gold), #E67E22);
      color: #1A1A1A;
      box-shadow: 0 6px 20px rgba(245, 180, 66, 0.3);
    }
    #renderBtn:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(245, 180, 66, 0.4); }
    #downloadBtn {
      background: linear-gradient(135deg, #3498DB, #2980B9);
      color: white;
      margin-top: 12px;
    }
    #downloadBtn:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(52, 152, 219, 0.4); }

    .hint {
      margin-top: 16px;
      font-size: 12.5px;
      color: #94A3B8;
      line-height: 1.5;
    }

    #preview {
      width: 100%;
      height: 180px;
      background: #000;
      border-radius: 12px;
      overflow: hidden;
      margin-top: 16px;
      border: 1px solid var(--border);
      background-size: cover;
      background-position: center;
      box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
      transition: transform 0.3s ease;
    }
    #preview:hover { transform: scale(1.02); }

    .canvas-area {
      width: calc(var(--canvas-w) * 0.38);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
    }

    canvas {
      width: 360px;
      height: 640px;
      border-radius: 16px;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.6);
      background: #000;
      image-rendering: pixelated;
      transition: transform 0.4s ease;
    }
    canvas:hover { transform: scale(1.015); }

    .canvas-info {
      color: #94A3B8;
      font-size: 13px;
      text-align: center;
    }

    footer {
      font-size: 11.5px;
      color: #64748B;
      margin-top: 12px;
      text-align: center;
    }

    @media (max-width: 1100px) {
      body { flex-direction: column; align-items: center; padding: 20px; }
      .panel { width: 100%; max-width: 480px; }
      .canvas-area { order: -1; width: 100%; max-width: 400px; }
      canvas { width: 100%; max-width: 360px; height: auto; aspect-ratio: 1080/1920; }
    }

    .pulse {
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
  </style>
</head>
<body>

  <div class="panel">
    <h2>Ad Generator</h2>
    
    <label>Telugu Headline</label>
    <input id="headlineTel" type="text" value="రాఘవ కన్సల్టెన్సీ — హోమ్ లోన్స్ & మార్ట్గేజ్">

    <label>Telugu Subheading</label>
    <input id="subTel" type="text" value="మీ కలల ఇల్లు ఇప్పుడు మీ చేతుల్లోనే!">

    <label>Phone Number</label>
    <input id="phone" type="text" value="90148 33945">

    <label>Website</label>
    <input id="site" type="text" value="www.raghavaconsultency.com">

    <label>Loan Bullets (Telugu, comma separated)</label>
    <input id="bullets" type="text" value="₹5 లక్షల నుండి ₹1 కోటి వరకు లోన్, తక్కువ వడ్డలు & వేగవంతమైన మంజూరు, డోర్‌స్టెప్ డాక్యుమెంటేషన్">

    <button id="renderBtn">Render Image</button>
    <button id="downloadBtn">Download PNG</button>

    <div class="hint">
      Preview: Scaled view. Click <strong>Render</strong> → then <strong>Download</strong> full 1080×1920.
    </div>
    <div id="preview"></div>
    <footer>Edit → Render → Download. No text overlap guaranteed.</footer>
  </div>

  <div class="canvas-area">
    <canvas id="adCanvas" width="1080" height="1920"></canvas>
    <div class="canvas-info">1080 × 1920 (WhatsApp Status)</div>
  </div>

<script>
  const canvas = document.getElementById('adCanvas');
  const ctx = canvas.getContext('2d', { alpha: false });
  const renderBtn = document.getElementById('renderBtn');
  const downloadBtn = document.getElementById('downloadBtn');
  const preview = document.getElementById('preview');

  const inputs = {
    headlineTel: document.getElementById('headlineTel'),
    subTel: document.getElementById('subTel'),
    phone: document.getElementById('phone'),
    site: document.getElementById('site'),
    bullets: document.getElementById('bullets')
  };

  const defaultData = Object.fromEntries(
    Object.entries(inputs).map(([k, el]) => [k, el.value])
  );

  // Rounded Rect
  function roundRect(ctx, x, y, w, h, r) {
    ctx.beginPath();
    ctx.moveTo(x + r, y);
    ctx.arcTo(x + w, y, x + w, y + h, r);
    ctx.arcTo(x + w, y + h, x, y + h, r);
    ctx.arcTo(x, y + h, x, y, r);
    ctx.arcTo(x, y, x + w, y, r);
    ctx.closePath();
  }

  // TELUGU-SAFE WRAP TEXT (FIXED)
  function wrapTextSafe(ctx, text, x, y, maxWidth, lineHeight, font) {
    ctx.font = font;
    const words = text.split(' ');
    let lines = [];
    let currentLine = '';

    for (let word of words) {
      const testLine = currentLine + (currentLine ? ' ' : '') + word;
      const metrics = ctx.measureText(testLine);
      const width = metrics.width;

      // Force break if single word is too long
      if (width > maxWidth && currentLine) {
        lines.push(currentLine);
        currentLine = word;
      } 
      // Force break long unbreakable word
      else if (ctx.measureText(word).width > maxWidth) {
        if (currentLine) {
          lines.push(currentLine);
          currentLine = '';
        }
        // Split long word by characters
        let chunk = '';
        for (let char of word) {
          if (ctx.measureText(chunk + char).width > maxWidth) {
            lines.push(chunk);
            chunk = char;
          } else {
            chunk += char;
          }
        }
        if (chunk) currentLine = chunk;
      } 
      else {
        currentLine = testLine;
      }
    }
    if (currentLine) lines.push(currentLine);

    // Draw lines
    lines.forEach((line, i) => {
      ctx.fillText(line, x, y + i * lineHeight);
    });

    return lines.length;
  }

  function drawAd(data) {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Background
    const bg = ctx.createLinearGradient(0, 0, 0, canvas.height);
    bg.addColorStop(0, '#0A3D62');
    bg.addColorStop(0.5, '#041F33');
    bg.addColorStop(1, '#040F1A');
    ctx.fillStyle = bg;
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Golden Glow
    const glow = ctx.createRadialGradient(canvas.width/2, canvas.height*0.4, 0, canvas.width/2, canvas.height*0.4, 1000);
    glow.addColorStop(0, 'rgba(245, 180, 66, 0.7)');
    glow.addColorStop(0.3, 'rgba(245, 180, 66, 0.2)');
    glow.addColorStop(1, 'rgba(4, 15, 26, 0)');
    ctx.fillStyle = glow;
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // House
    const houseX = canvas.width * 0.1;
    const houseY = canvas.height * 0.38;
    const houseW = 660;
    const houseH = 420;

    roundRect(ctx, houseX, houseY, houseW, houseH, 32);
    ctx.fillStyle = 'rgba(10, 30, 50, 0.8)';
    ctx.fill();
    ctx.strokeStyle = 'rgba(245, 180, 66, 0.3)';
    ctx.lineWidth = 3;
    ctx.stroke();

    // Roof
    ctx.beginPath();
    ctx.moveTo(houseX - 30, houseY + 40);
    ctx.lineTo(houseX + houseW/2, houseY - 160);
    ctx.lineTo(houseX + houseW + 30, houseY + 40);
    ctx.closePath();
    const roofGrad = ctx.createLinearGradient(houseX, houseY - 160, houseX + houseW, houseY + 40);
    roofGrad.addColorStop(0, '#1E90FF');
    roofGrad.addColorStop(1, '#0F5A8A');
    ctx.fillStyle = roofGrad;
    ctx.fill();

    // Windows
    ctx.fillStyle = '#FFECB3';
    ctx.shadowBlur = 20;
    ctx.shadowColor = '#FFD700';
    roundRect(ctx, houseX + 80, houseY + 100, 130, 110, 12); ctx.fill();
    roundRect(ctx, houseX + 260, houseY + 100, 130, 110, 12); ctx.fill();
    roundRect(ctx, houseX + 440, houseY + 100, 130, 110, 12); ctx.fill();
    ctx.shadowBlur = 0;

    // Door
    roundRect(ctx, houseX + 440, houseY + 220, 100, 180, 16);
    ctx.fillStyle = '#FFECB3';
    ctx.fill();

    // Icons
    const iconY = houseY - 50;
    const iconSize = 48;
    ctx.fillStyle = '#F5B042';
    ctx.shadowBlur = 12;
    ctx.shadowColor = '#F5B042';
    ctx.beginPath(); ctx.arc(houseX + 100, iconY, iconSize/2, 0, Math.PI*2); ctx.fill();
    ctx.fillRect(houseX + 220, iconY - iconSize/2, iconSize, iconSize/2);
    ctx.fillRect(houseX + 230, iconY - iconSize/4, iconSize - 20, iconSize/2);
    roundRect(ctx, houseX + 340, iconY - iconSize/2, 36, iconSize, 6); ctx.fill();
    ctx.shadowBlur = 0;

    // Headline
    ctx.fillStyle = '#FFF8E1';
    ctx.textAlign = 'center';
    wrapTextSafe(ctx, data.headlineTel, canvas.width/2, canvas.height*0.12, canvas.width - 140, 88, '800 72px "Noto Sans Telugu", "Poppins", sans-serif');

    // Subheading
    ctx.fillStyle = '#E6F0FA';
    wrapTextSafe(ctx, data.subTel, canvas.width/2, canvas.height*0.20, canvas.width - 180, 56, '600 42px "Noto Sans Telugu", "Poppins", sans-serif');

    // Bullets
    const bullets = data.bullets.split(',').map(s => s.trim()).filter(Boolean);
    const bx = canvas.width * 0.62;
    let by = canvas.height * 0.50;

    ctx.textAlign = 'left';
    bullets.forEach((bullet, i) => {
      if (i >= 4) return;
      ctx.beginPath();
      ctx.arc(bx - 40, by + i*78 + 10, 12, 0, Math.PI*2);
      ctx.fillStyle = '#F5B042';
      ctx.fill();

      ctx.fillStyle = '#FFFFFF';
      wrapTextSafe(ctx, bullet, bx, by + i*78 + 15, canvas.width - bx - 100, 48, '600 36px "Noto Sans Telugu", "Poppins", sans-serif');
    });

    // Portrait
    const faceX = canvas.width * 0.68;
    const faceY = canvas.height * 0.68;
    roundRect(ctx, faceX - 50, faceY - 360, 340, 560, 36);
    ctx.fillStyle = '#0A3D62';
    ctx.fill();
    ctx.strokeStyle = '#F5B042';
    ctx.lineWidth = 4;
    ctx.stroke();

    ctx.beginPath();
    ctx.ellipse(faceX + 120, faceY - 160, 90, 120, 0, 0, Math.PI*2);
    ctx.fillStyle = '#F4C2A1';
    ctx.fill();

    ctx.fillStyle = '#041F33';
    roundRect(ctx, faceX - 20, faceY + 60, 280, 300, 20);
    ctx.fill();

    // Contact
    ctx.textAlign = 'center';
    ctx.fillStyle = '#FFFFFF';
    ctx.font = '700 48px "Poppins", sans-serif';
    ctx.fillText(data.phone, canvas.width/2, canvas.height*0.78);

    ctx.font = '500 34px "Poppins", sans-serif';
    ctx.fillStyle = '#A0D8F1';
    ctx.fillText(data.site, canvas.width/2, canvas.height*0.82);

    // Brand
    ctx.font = '800 76px "Poppins", sans-serif';
    ctx.fillStyle = '#F5B042';
    ctx.shadowBlur = 20;
    ctx.shadowColor = '#F5B042';
    ctx.fillText('RAGHAVA', canvas.width/2, canvas.height*0.89);
    ctx.fillText('CONSULTANCY', canvas.width/2, canvas.height*0.935);
    ctx.shadowBlur = 0;

    ctx.font = '600 32px "Poppins", sans-serif';
    ctx.fillStyle = '#E6F0FA';
    ctx.fillText('Transforming Dreams into Homes.', canvas.width/2, canvas.height*0.97);
  }

  function renderFromInputs() {
    const data = Object.fromEntries(
      Object.entries(inputs).map(([k, el]) => [k, el.value || defaultData[k]])
    );
    drawAd(data);
    updatePreview();
    preview.classList.add('pulse');
    setTimeout(() => preview.classList.remove('pulse'), 2000);
  }

  function updatePreview() {
    const scale = 0.25;
    const temp = document.createElement('canvas');
    temp.width = canvas.width * scale;
    temp.height = canvas.height * scale;
    const tctx = temp.getContext('2d');
    tctx.drawImage(canvas, 0, 0, temp.width, temp.height);
    preview.style.backgroundImage = `url(${temp.toDataURL()})`;
  }

  function downloadPNG() {
    renderFromInputs();
    setTimeout(() => {
      const link = document.createElement('a');
      link.href = canvas.toDataURL('image/png');
      const date = new Date().toISOString().slice(0,10).replace(/-/g, '');
      link.download = `raghava_ad_${date}.png`;
      link.click();
    }, 200);
  }

  renderBtn.addEventListener('click', renderFromInputs);
  downloadBtn.addEventListener('click', downloadPNG);

  window.addEventListener('load', () => setTimeout(renderFromInputs, 400));
</script>
</body>
</html>
